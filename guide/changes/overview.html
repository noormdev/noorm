<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Changes | noorm</title>
    <meta name="description" content="Database Schema & Change Manager">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.BY1_EUBl.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.nXpzwUTN.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.YF6eQPX_.js">
    <link rel="modulepreload" href="/assets/chunks/theme.CgPUS6I8.js">
    <link rel="modulepreload" href="/assets/guide_changes_overview.md.8RWQcfR2.lean.js">
    <link rel="icon" href="/image/logo.png">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y69K95866J"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y69K95866J");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-10d4d845></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-10d4d845>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-604a0865><div class="VPNavBar" data-v-604a0865 data-v-18128346><div class="wrapper" data-v-18128346><div class="container" data-v-18128346><div class="title" data-v-18128346><div class="VPNavBarTitle has-sidebar" data-v-18128346 data-v-d4488dd0><a class="title" href="/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/image/logo.png" alt data-v-ab19afbb><!--]--><span data-v-d4488dd0>noorm</span><!--[--><!--]--></a></div></div><div class="content" data-v-18128346><div class="content-body" data-v-18128346><!--[--><!--]--><div class="VPNavBarSearch search" data-v-18128346><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-18128346 data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/getting-started/installation.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Getting Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/sql-files/organization.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tui.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>TUI</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/headless.html" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Headless</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/dev/" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Dev Docs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-18128346 data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-18128346 data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/noormdev/noorm" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-18128346 data-v-600b50c9 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><!----><div class="group" data-v-600b50c9><div class="item appearance" data-v-600b50c9><p class="label" data-v-600b50c9>Appearance</p><div class="appearance-action" data-v-600b50c9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-600b50c9 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-600b50c9><div class="item social-links" data-v-600b50c9><div class="VPSocialLinks social-links-list" data-v-600b50c9 data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/noormdev/noorm" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-18128346 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-18128346><div class="divider-line" data-v-18128346></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-73add737><div class="container" data-v-73add737><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-73add737><span class="vpi-align-left menu-icon" data-v-73add737></span><span class="menu-text" data-v-73add737>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-73add737 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-49f51a23><div class="curtain" data-v-49f51a23></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-49f51a23><span class="visually-hidden" id="sidebar-aria-label" data-v-49f51a23> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Getting Started</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/getting-started/installation.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Installation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/getting-started/first-build.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>First Build</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/getting-started/building-your-sdk.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Building Your SDK</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/getting-started/concepts.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Concepts</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Features</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/tui.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Terminal UI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/headless.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Headless Mode</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>SQL Files</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/sql-files/organization.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Organization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/sql-files/templates.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Templates</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/sql-files/execution.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Execution</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Environments</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/environments/configs.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Configs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/environments/stages.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Stages</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/environments/secrets.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Secrets</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Changes</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/changes/overview.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/changes/forward-revert.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Forward & Revert</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/changes/history.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>History</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Database</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/database/explore.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Explorer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/database/teardown.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Teardown</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/guide/database/terminal.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Terminal</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Reference</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/reference/sdk.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>SDK</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-bd4f21ea><div class="VPDoc has-sidebar has-aside" data-v-bd4f21ea data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>On this page</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-63c57e50><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _guide_changes_overview" data-v-d668f7cc><div><h1 id="changes" tabindex="-1">Changes <a class="header-anchor" href="#changes" aria-label="Permalink to “Changes”">​</a></h1><p>Changes are versioned operations that evolve an existing database to match your ideal schema. When you need to add a column, transform data, or run SQL that should execute exactly once with rollback support, changes are the answer.</p><h2 id="why-changes-not-migrations" tabindex="-1">Why &quot;Changes&quot;, Not &quot;Migrations&quot; <a class="header-anchor" href="#why-changes-not-migrations" aria-label="Permalink to “Why &quot;Changes&quot;, Not &quot;Migrations&quot;”">​</a></h2><p>Most tools call these migrations. We don&#39;t, and here&#39;s why.</p><p><strong>Your SQL files are the source of truth.</strong> They define what your schema <em>is</em>—the ideal, current state. You handcraft them, review them, keep them up to date. When you need a fresh database, you run your SQL files. No archaeology through years of migration history.</p><p><strong>Changes describe what you <em>do</em>, not what you <em>move</em>.</strong> To migrate implies moving something from one place to another. Data migrations traditionally mean moving data between servers, warehouses, or systems. But when you add a column to an existing table, you&#39;re not migrating anything—you&#39;re changing the schema.</p><p>Some argue that you <em>are</em> moving data—adding a column means moving data into it, splitting <code>full_name</code> into <code>first_name</code> and <code>last_name</code> is moving data between columns, or you&#39;re &quot;moving the schema from one version to the next.&quot; This is mental gymnastics. It&#39;s stretching a word to fit a process it was never meant to describe.</p><p>The term &quot;migration&quot; originated in enterprise contexts where it actually made sense—incrementally moving schemas and data from Oracle to SQL Server, or consolidating legacy systems into a new platform. Rails borrowed this terminology in 2005 and popularized it for web applications. Everyone followed suit without questioning whether the word fit. We&#39;re not moving databases between systems. We&#39;re changing them in place. The language matters.</p><p><strong>Kysely already has migrations.</strong> If you want a traditional migration system, Kysely has one built in. But it lacks what noorm provides:</p><ul><li><strong>Identity tracking</strong> - Who ran what, and when?</li><li><strong>Flexible workflows</strong> - Build from scratch <em>or</em> apply changes, your choice</li><li><strong>Templates and secrets</strong> - Dynamic SQL with encrypted credentials</li><li><strong>Execution history</strong> - Full audit trail with timing and checksums</li><li><strong>Revert scripts</strong> - Rollback support when things go wrong</li></ul><p>Changes are your changelog. They document <em>how</em> to get an existing database to match your SQL files. Your SQL files remain the source of truth.</p><h2 id="when-to-use-changes" tabindex="-1">When to Use Changes <a class="header-anchor" href="#when-to-use-changes" aria-label="Permalink to “When to Use Changes”">​</a></h2><p>The distinction is simple: <strong>can you rebuild from scratch, or do you need to evolve what&#39;s there?</strong></p><p><strong>Fresh database?</strong> Run <code>noorm run build</code>. This executes your <code>sql/</code> folder—your source of truth. Tables, views, functions, seed data. Everything needed to create a working schema from nothing.</p><p><strong>Existing database with data you can&#39;t lose?</strong> Run <code>noorm change ff</code>. This applies pending changes from your <code>changes/</code> folder. Each change runs once, gets recorded in the database, and won&#39;t run again unless reverted.</p><p>Changes exist because production databases can&#39;t be rebuilt. You can&#39;t drop a table with millions of rows and recreate it. You need to <code>ALTER TABLE</code> in place, transform data carefully, add indexes without blocking writes. Changes give you:</p><ul><li><strong>Execution tracking</strong> - Know which changes have been applied</li><li><strong>Revert scripts</strong> - Roll back when something goes wrong</li><li><strong>Ordered execution</strong> - Date prefixes ensure consistent ordering across teams</li></ul><h2 id="directory-structure" tabindex="-1">Directory Structure <a class="header-anchor" href="#directory-structure" aria-label="Permalink to “Directory Structure”">​</a></h2><p>Each change lives in its own folder with a specific structure:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>changes/</span></span>
<span class="line"><span>└── 2025-01-15-add-email-verification/</span></span>
<span class="line"><span>    ├── change/                    # Forward scripts (required)</span></span>
<span class="line"><span>    │   ├── 001_create-tokens-table.sql</span></span>
<span class="line"><span>    │   └── 002_add-user-column.sql</span></span>
<span class="line"><span>    ├── revert/                    # Rollback scripts (optional)</span></span>
<span class="line"><span>    │   ├── 001_drop-user-column.sql</span></span>
<span class="line"><span>    │   └── 002_drop-tokens-table.sql</span></span>
<span class="line"><span>    └── changelog.md               # Human-readable description</span></span></code></pre></div><p><strong>change/</strong> contains your forward scripts. These run in sequence order when you apply the change.</p><p><strong>revert/</strong> contains rollback scripts. These run in forward sequence order (001, then 002), just like change scripts. You design them to undo your changes in reverse—notice how <code>001_drop-user-column</code> undoes the last change and <code>002_drop-tokens-table</code> undoes the first.</p><p><strong>changelog.md</strong> is optional but recommended. Document what the change does and why. Your future self will thank you.</p><h2 id="naming-conventions" tabindex="-1">Naming Conventions <a class="header-anchor" href="#naming-conventions" aria-label="Permalink to “Naming Conventions”">​</a></h2><p>Change folders follow the pattern <code>YYYY-MM-DD-description</code>:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>2025-01-15-add-email-verification</span></span>
<span class="line"><span>2025-02-01-migrate-user-roles</span></span>
<span class="line"><span>2025-02-14-add-search-indexes</span></span></code></pre></div><p>The date prefix ensures changes apply in chronological order across your team. When Alice creates <code>2025-01-15-add-users</code> and Bob creates <code>2025-01-16-add-posts</code>, they&#39;ll apply in the right order regardless of when they merge.</p><p>Files within <code>change/</code> and <code>revert/</code> use sequence prefixes:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>001_create-table.sql</span></span>
<span class="line"><span>002_add-column.sql</span></span>
<span class="line"><span>003_update-data.sql</span></span></code></pre></div><p>The three-digit prefix guarantees execution order. Names after the underscore are for humans.</p><h2 id="creating-a-change" tabindex="-1">Creating a Change <a class="header-anchor" href="#creating-a-change" aria-label="Permalink to “Creating a Change”">​</a></h2><p>From the TUI, navigate to changes (press <code>g</code> from home) and select add (<code>a</code>). noorm creates the folder structure for you.</p><p>In headless mode:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add-email-verification</span></span></code></pre></div><p>This creates:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>changes/2025-01-15-add-email-verification/</span></span>
<span class="line"><span>├── change/</span></span>
<span class="line"><span>├── revert/</span></span>
<span class="line"><span>└── changelog.md</span></span></code></pre></div><p>Now add your SQL files to <code>change/</code>. If you want rollback support, add corresponding scripts to <code>revert/</code>.</p><h2 id="write-idempotent-ddl" tabindex="-1">Write Idempotent DDL <a class="header-anchor" href="#write-idempotent-ddl" aria-label="Permalink to “Write Idempotent DDL”">​</a></h2><p>Always check for existence before making changes. Use <code>IF NOT EXISTS</code> when creating, <code>IF EXISTS</code> when dropping. This protects you when:</p><ul><li>A change accidentally runs twice</li><li>Someone executes the file directly outside of noorm</li><li>You need to re-run after a partial failure</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- change/001_add-verification-column.sql (forward)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COLUMN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email_verified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FALSE;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- revert/001_drop-verification-column.sql (rollback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COLUMN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email_verified;</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- change/001_create-tokens-table.sql (forward)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> verification_tokens (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SERIAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users(id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expires_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- revert/001_drop-tokens-table.sql (rollback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> verification_tokens;</span></span></code></pre></div><p>This applies to both forward and revert scripts. A revert that fails because &quot;column doesn&#39;t exist&quot; is just as broken as a change that fails because &quot;column already exists.&quot;</p><h2 id="file-types" tabindex="-1">File Types <a class="header-anchor" href="#file-types" aria-label="Permalink to “File Types”">​</a></h2><p>Changes support three file types:</p><h3 id="sql-files-sql" tabindex="-1">SQL Files (.sql) <a class="header-anchor" href="#sql-files-sql" aria-label="Permalink to “SQL Files (.sql)”">​</a></h3><p>Raw SQL executed directly. The most common type.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 001_add-verification-column.sql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COLUMN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email_verified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FALSE;</span></span></code></pre></div><h3 id="templates-sql-tmpl" tabindex="-1">Templates (.sql.tmpl) <a class="header-anchor" href="#templates-sql-tmpl" aria-label="Permalink to “Templates (.sql.tmpl)”">​</a></h3><p>Dynamic SQL processed through the Eta template engine before execution. Useful when you need conditional logic or variable substitution. See <a href="/guide/sql-files/templates.html">Templates</a> for full syntax reference.</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 001_add-audit-table.sql.tmpl</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {%~ $.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}.audit_log (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SERIAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="manifests-txt" tabindex="-1">Manifests (.txt) <a class="header-anchor" href="#manifests-txt" aria-label="Permalink to “Manifests (.txt)”">​</a></h3><p>Reference existing schema files instead of duplicating SQL. The manifest lists paths relative to your schema directory.</p><p>Many database objects use <code>CREATE OR REPLACE</code>—views, functions, procedures, triggers. They&#39;re already idempotent. When you change a table, you often need to recreate dependent views or functions. Instead of copying that SQL into your change folder, reference the source of truth:</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># change/001_rebuild-views.txt</span></span>
<span class="line"><span>views/user_summary.sql</span></span>
<span class="line"><span>views/active_users.sql</span></span>
<span class="line"><span>functions/get_user_stats.sql</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- change/002_add-status-column.sql</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COLUMN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;active&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Manifest files participate in ordering. Here, <code>001_rebuild-views.txt</code> runs first (recreating views that might depend on the old schema), then <code>002_add-status-column.sql</code> adds the column. You could also flip this—add the column first with <code>001_</code>, then rebuild views with <code>002_</code> so they pick up the new column.</p><p>This keeps your <code>sql/</code> folder as the single source of truth. Views and functions are defined once, referenced wherever needed.</p><h2 id="checking-change-status" tabindex="-1">Checking Change Status <a class="header-anchor" href="#checking-change-status" aria-label="Permalink to “Checking Change Status”">​</a></h2><p>From the TUI, the changes screen shows status for each change:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>┌─ Changes ─────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  • 2025-01-15-add-email-verification    success       │</span></span>
<span class="line"><span>│    2025-02-01-migrate-user-roles        pending       │</span></span>
<span class="line"><span>│    2025-02-14-add-search-indexes        pending       │</span></span>
<span class="line"><span>└───────────────────────────────────────────────────────┘</span></span></code></pre></div><p>Each change has a status:</p><table tabindex="0"><thead><tr><th>Status</th><th>Meaning</th></tr></thead><tbody><tr><td><code>pending</code></td><td>Not yet applied</td></tr><tr><td><code>success</code></td><td>Applied successfully</td></tr><tr><td><code>failed</code></td><td>Last execution failed</td></tr><tr><td><code>reverted</code></td><td>Was applied, then rolled back</td></tr></tbody></table><p>In headless mode:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;changes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15-add-email-verification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-02-01-migrate-user-roles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pending&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="common-workflows" tabindex="-1">Common Workflows <a class="header-anchor" href="#common-workflows" aria-label="Permalink to “Common Workflows”">​</a></h2><h3 id="apply-a-single-change" tabindex="-1">Apply a Single Change <a class="header-anchor" href="#apply-a-single-change" aria-label="Permalink to “Apply a Single Change”">​</a></h3><p>Run a specific change by name:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2025-02-01-migrate-user-roles</span></span></code></pre></div><p>From the TUI, select the change and press enter.</p><h3 id="apply-all-pending-changes" tabindex="-1">Apply All Pending Changes <a class="header-anchor" href="#apply-all-pending-changes" aria-label="Permalink to “Apply All Pending Changes”">​</a></h3><p>Fast-forward applies all pending changes in order:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ff</span></span></code></pre></div><p>This is what you typically run in CI/CD after deployment.</p><h3 id="apply-the-next-pending-change" tabindex="-1">Apply the Next Pending Change <a class="header-anchor" href="#apply-the-next-pending-change" aria-label="Permalink to “Apply the Next Pending Change”">​</a></h3><p>Run just the next change in sequence:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next</span></span></code></pre></div><p>Useful when you want to apply changes one at a time and verify each.</p><h3 id="revert-a-change" tabindex="-1">Revert a Change <a class="header-anchor" href="#revert-a-change" aria-label="Permalink to “Revert a Change”">​</a></h3><p>Roll back a previously applied change:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2025-02-01-migrate-user-roles</span></span></code></pre></div><p>This runs the scripts in <code>revert/</code> in sequence order. The change status becomes <code>reverted</code>, which means it will run again on the next fast-forward.</p><h3 id="rewind-multiple-changes" tabindex="-1">Rewind Multiple Changes <a class="header-anchor" href="#rewind-multiple-changes" aria-label="Permalink to “Rewind Multiple Changes”">​</a></h3><p>Revert the last N applied changes:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rewind</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span></code></pre></div><p>This reverts the three most recently applied changes, starting with the newest.</p><h3 id="preview-before-running" tabindex="-1">Preview Before Running <a class="header-anchor" href="#preview-before-running" aria-label="Permalink to “Preview Before Running”">​</a></h3><p>See what SQL will execute without running it:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2025-02-01-migrate-user-roles</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --preview</span></span></code></pre></div><p>For templates, this shows the rendered SQL. Use this before running against production.</p><h3 id="dry-run" tabindex="-1">Dry Run <a class="header-anchor" href="#dry-run" aria-label="Permalink to “Dry Run”">​</a></h3><p>Render files to a temporary directory without executing:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2025-02-01-migrate-user-roles</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span></span></code></pre></div><p>Files are written to <code>tmp/</code> so you can inspect them.</p><h2 id="when-changes-re-run" tabindex="-1">When Changes Re-Run <a class="header-anchor" href="#when-changes-re-run" aria-label="Permalink to “When Changes Re-Run”">​</a></h2><p>noorm tracks whether each change needs to run based on several conditions:</p><table tabindex="0"><thead><tr><th>Condition</th><th>What Happens</th></tr></thead><tbody><tr><td>New change folder</td><td>Runs</td></tr><tr><td>Files modified since last run</td><td>Runs</td></tr><tr><td>Previous execution failed</td><td>Runs</td></tr><tr><td>Change was reverted</td><td>Runs</td></tr><tr><td>Database was torn down</td><td>Runs (marked stale)</td></tr><tr><td><code>--force</code> flag provided</td><td>Runs</td></tr><tr><td>Successfully applied, unchanged</td><td>Skipped</td></tr></tbody></table><p>After a successful run, the change won&#39;t run again unless something changes. This is tracked via checksums of all files in <code>change/</code> or <code>revert/</code>.</p><div class="tip custom-block"><p class="custom-block-title">Force Re-Run</p><p>Need to re-apply a change? Use <code>--force</code>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-change</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span></code></pre></div></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to “Best Practices”">​</a></h2><p><strong>One logical change per folder.</strong> Don&#39;t bundle unrelated changes. If you&#39;re adding users and adding products, make two separate changes.</p><p><strong>Always include revert scripts.</strong> Even if you think you&#39;ll never need them. Recovery is worth the extra files.</p><p><strong>Test reverts in development.</strong> Run <code>revert</code> then <code>change</code> to verify rollback works before deploying.</p><p><strong>Verify with explore and terminal.</strong> noorm includes a database explorer (<code>d</code> → <code>e</code> from home) and SQL terminal (<code>d</code> → <code>t</code>) so you can inspect your schema and query data without leaving the tool. After applying a change, explore the table to confirm the column exists. After reverting, run a quick SELECT to verify it&#39;s gone. Don&#39;t trust—verify.</p><p><strong>Use manifests for shared SQL.</strong> Reference existing schema files with <code>.txt</code> manifests instead of duplicating SQL.</p><p><strong>Preview before production.</strong> Use <code>--preview</code> or <code>--dry-run</code> to inspect exactly what will execute.</p><p><strong>Write meaningful changelog.md files.</strong> Explain <em>why</em> the change exists, not just what it does. Future debugging sessions will benefit.</p><h2 id="what-s-next" tabindex="-1">What&#39;s Next? <a class="header-anchor" href="#what-s-next" aria-label="Permalink to “What&#39;s Next?”">​</a></h2><ul><li><a href="/guide/changes/forward-revert.html">Forward &amp; Revert</a> - Applying and rolling back changes</li><li><a href="/guide/changes/history.html">History</a> - Tracking execution history</li><li><a href="/guide/sql-files/templates.html">Templates</a> - Using <code>.sql.tmpl</code> files in changes</li></ul></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/guide/environments/secrets.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Secrets</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/guide/changes/forward-revert.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Forward & Revert</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"dev_change.md\":\"C8I7x_tz\",\"dev_ci.md\":\"DAJ_2Xk0\",\"dev_cli-router-implementation.md\":\"CSMrh0qO\",\"dev_config-sharing.md\":\"DM5BZTSL\",\"dev_config.md\":\"Cat17gqA\",\"dev_datamodel.md\":\"BzRziNj_\",\"dev_explore.md\":\"BPgB0xZb\",\"dev_headless.md\":\"chgjWtOe\",\"dev_identity.md\":\"BNwjCqJx\",\"dev_index.md\":\"CkYGriO3\",\"dev_ink-cheatsheet.md\":\"CYU4p8rl\",\"dev_ink-testing-library-cheatsheet.md\":\"shhX6yhY\",\"dev_lock.md\":\"Bg3RmB_o\",\"dev_logger.md\":\"BJA92-JC\",\"dev_project-discovery.md\":\"BYX_svZ3\",\"dev_readme.md\":\"DxYqaP16\",\"dev_runner.md\":\"B-frcj_W\",\"dev_sdk.md\":\"bBD_6MAI\",\"dev_secrets.md\":\"BLkkdNVR\",\"dev_settings.md\":\"BN4MywzB\",\"dev_sql-terminal.md\":\"C8m0HNFT\",\"dev_state.md\":\"BQx_s9g4\",\"dev_teardown.md\":\"BrDTmdOg\",\"dev_template.md\":\"D3-jujw_\",\"dev_version.md\":\"Dere2YL8\",\"getting-started_building-your-sdk.md\":\"DpxpjmRq\",\"getting-started_concepts.md\":\"BNpOCbEt\",\"getting-started_first-build.md\":\"Ck0ilBkN\",\"getting-started_installation.md\":\"DzoYSzJ-\",\"guide_changes_forward-revert.md\":\"C51Y2MA7\",\"guide_changes_history.md\":\"Ce4hEdNZ\",\"guide_changes_overview.md\":\"8RWQcfR2\",\"guide_database_explore.md\":\"DkIToWLb\",\"guide_database_teardown.md\":\"DmkvYi07\",\"guide_database_terminal.md\":\"BWe9iIox\",\"guide_environments_configs.md\":\"D5beb1gT\",\"guide_environments_secrets.md\":\"1rOF0VPO\",\"guide_environments_stages.md\":\"CjbjP8QA\",\"guide_sql-files_execution.md\":\"DkKKUgaM\",\"guide_sql-files_organization.md\":\"D5W0DbFF\",\"guide_sql-files_templates.md\":\"B6WyZ2py\",\"headless.md\":\"CwGar4tr\",\"index.md\":\"pxiTM7pj\",\"reference_sdk.md\":\"DqAsiTzI\",\"tui.md\":\"srnoQpYU\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"noorm\",\"description\":\"Database Schema & Change Manager\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/image/logo.png\",\"siteTitle\":\"noorm\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started/installation\"},{\"text\":\"Guide\",\"link\":\"/guide/sql-files/organization\"},{\"text\":\"TUI\",\"link\":\"/tui\"},{\"text\":\"Headless\",\"link\":\"/headless\"},{\"text\":\"Dev Docs\",\"link\":\"/dev/\"}],\"sidebar\":{\"/dev/\":[{\"text\":\"Core Modules\",\"items\":[{\"text\":\"Overview\",\"link\":\"/dev/\"},{\"text\":\"Change Management\",\"link\":\"/dev/change\"},{\"text\":\"Configuration\",\"link\":\"/dev/config\"},{\"text\":\"Runner\",\"link\":\"/dev/runner\"},{\"text\":\"Settings\",\"link\":\"/dev/settings\"},{\"text\":\"State\",\"link\":\"/dev/state\"}]},{\"text\":\"Features\",\"items\":[{\"text\":\"Database Explorer\",\"link\":\"/dev/explore\"},{\"text\":\"SQL Terminal\",\"link\":\"/dev/sql-terminal\"},{\"text\":\"Templates\",\"link\":\"/dev/template\"},{\"text\":\"Secrets\",\"link\":\"/dev/secrets\"},{\"text\":\"Locking\",\"link\":\"/dev/lock\"},{\"text\":\"Teardown\",\"link\":\"/dev/teardown\"},{\"text\":\"Config Sharing\",\"link\":\"/dev/config-sharing\"}]},{\"text\":\"Integration\",\"items\":[{\"text\":\"SDK\",\"link\":\"/dev/sdk\"},{\"text\":\"Headless Mode\",\"link\":\"/dev/headless\"},{\"text\":\"CI/CD\",\"link\":\"/dev/ci\"},{\"text\":\"Identity\",\"link\":\"/dev/identity\"}]},{\"text\":\"Reference\",\"items\":[{\"text\":\"Data Model\",\"link\":\"/dev/datamodel\"},{\"text\":\"Logger\",\"link\":\"/dev/logger\"},{\"text\":\"Versioning\",\"link\":\"/dev/version\"}]}],\"/\":[{\"text\":\"Getting Started\",\"items\":[{\"text\":\"Installation\",\"link\":\"/getting-started/installation\"},{\"text\":\"First Build\",\"link\":\"/getting-started/first-build\"},{\"text\":\"Building Your SDK\",\"link\":\"/getting-started/building-your-sdk\"},{\"text\":\"Concepts\",\"link\":\"/getting-started/concepts\"}]},{\"text\":\"Features\",\"items\":[{\"text\":\"Terminal UI\",\"link\":\"/tui\"},{\"text\":\"Headless Mode\",\"link\":\"/headless\"}]},{\"text\":\"SQL Files\",\"collapsed\":true,\"items\":[{\"text\":\"Organization\",\"link\":\"/guide/sql-files/organization\"},{\"text\":\"Templates\",\"link\":\"/guide/sql-files/templates\"},{\"text\":\"Execution\",\"link\":\"/guide/sql-files/execution\"}]},{\"text\":\"Environments\",\"collapsed\":true,\"items\":[{\"text\":\"Configs\",\"link\":\"/guide/environments/configs\"},{\"text\":\"Stages\",\"link\":\"/guide/environments/stages\"},{\"text\":\"Secrets\",\"link\":\"/guide/environments/secrets\"}]},{\"text\":\"Changes\",\"collapsed\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/guide/changes/overview\"},{\"text\":\"Forward & Revert\",\"link\":\"/guide/changes/forward-revert\"},{\"text\":\"History\",\"link\":\"/guide/changes/history\"}]},{\"text\":\"Database\",\"collapsed\":true,\"items\":[{\"text\":\"Explorer\",\"link\":\"/guide/database/explore\"},{\"text\":\"Teardown\",\"link\":\"/guide/database/teardown\"},{\"text\":\"Terminal\",\"link\":\"/guide/database/terminal\"}]},{\"text\":\"Reference\",\"items\":[{\"text\":\"SDK\",\"link\":\"/reference/sdk\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/noormdev/noorm\"}],\"search\":{\"provider\":\"local\"},\"outline\":{\"level\":[2,3]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>