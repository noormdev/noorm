import{_ as o,I as d,c as k,o as t,a6 as h,b as r,j as s,w as a,a as e,J as l,a7 as p}from"./chunks/framework.YF6eQPX_.js";const C=JSON.parse('{"title":"Config Sharing","description":"","frontmatter":{},"headers":[],"relativePath":"dev/config-sharing.md","filePath":"dev/config-sharing.md"}'),c={name:"dev/config-sharing.md"};function E(g,i,y,m,u,A){const n=d("Mermaid");return t(),k("div",null,[i[4]||(i[4]=h('<h1 id="config-sharing" tabindex="-1">Config Sharing <a class="header-anchor" href="#config-sharing" aria-label="Permalink to “Config Sharing”">​</a></h1><h2 id="the-problem" tabindex="-1">The Problem <a class="header-anchor" href="#the-problem" aria-label="Permalink to “The Problem”">​</a></h2><p>Database configurations contain sensitive connection details and secrets. Teams need to share these safely:</p><ul><li>New developer joins the team and needs database access</li><li>CI/CD pipelines need the same config as local development</li><li>Staging configs need to mirror production structure</li></ul><p>Sharing configs via plaintext (email, Slack) exposes credentials. noorm solves this with encrypted config sharing using public key cryptography.</p><h2 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to “How It Works”">​</a></h2><p>Config sharing uses X25519 key exchange with AES-256-GCM encryption. Each user has an identity keypair stored at <code>~/.noorm/</code>. When Alice exports a config for Bob, she encrypts it with Bob&#39;s public key. Only Bob&#39;s private key can decrypt it.</p><p>Credentials (user/password) are intentionally excluded from exports. The recipient provides their own database credentials during import. This ensures shared configs don&#39;t contain hardcoded passwords.</p>',8)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-38",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5BAlice's%20Config%5D%20--%3E%20B%5BExport%5D%0A%20%20%20%20B%20--%3E%20C%5BEncrypted%20File%5D%0A%20%20%20%20C%20--%3E%20D%5BShare%20via%20any%20channel%5D%0A%20%20%20%20D%20--%3E%20E%5BBob%20Downloads%5D%0A%20%20%20%20E%20--%3E%20F%5BImport%5D%0A%20%20%20%20F%20--%3E%20G%5BBob%20adds%20credentials%5D%0A%20%20%20%20G%20--%3E%20H%5BBob's%20Config%5D%0A"})]),fallback:a(()=>[...i[0]||(i[0]=[e(" Loading... ",-1)])]),_:1})),i[5]||(i[5]=s("h2",{id:"export-flow",tabindex:"-1"},[e("Export Flow "),s("a",{class:"header-anchor",href:"#export-flow","aria-label":"Permalink to “Export Flow”"},"​")],-1)),i[6]||(i[6]=s("p",null,"When exporting a config, the sender:",-1)),i[7]||(i[7]=s("ol",null,[s("li",null,"Enters recipient's email address"),s("li",null,"noorm looks up the recipient's public key from known users"),s("li",null,"Config data (excluding credentials) is encrypted with recipient's public key"),s("li",null,"Encrypted file is written to current directory")],-1)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-67",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20User%20as%20Sender%0A%20%20%20%20participant%20CLI%20as%20noorm%20CLI%0A%20%20%20%20participant%20State%20as%20State%20Manager%0A%20%20%20%20participant%20Crypto%20as%20Crypto%20Module%0A%20%20%20%20participant%20FS%20as%20File%20System%0A%0A%20%20%20%20User-%3E%3ECLI%3A%20noorm%20config%3Aexport%20myconfig%0A%20%20%20%20CLI-%3E%3EUser%3A%20Enter%20recipient%20email%0A%20%20%20%20User-%3E%3ECLI%3A%20bob%40example.com%0A%20%20%20%20CLI-%3E%3EState%3A%20findKnownUsersByEmail(email)%0A%20%20%20%20State--%3E%3ECLI%3A%20%5BKnownUser%20with%20publicKey%5D%0A%0A%20%20%20%20Note%20over%20CLI%3A%20Build%20export%20data%3Cbr%2F%3E(excludes%20user%2Fpassword)%0A%0A%20%20%20%20CLI-%3E%3ECrypto%3A%20encryptForRecipient(data%2C%20publicKey)%0A%0A%20%20%20%20Note%20over%20Crypto%3A%201.%20Generate%20ephemeral%20X25519%20keypair%3Cbr%2F%3E2.%20ECDH%3A%20ephemeralPrivate%20%2B%20recipientPublic%3Cbr%2F%3E3.%20Derive%20AES%20key%20via%20HKDF%3Cbr%2F%3E4.%20Encrypt%20with%20AES-256-GCM%0A%0A%20%20%20%20Crypto--%3E%3ECLI%3A%20SharedConfigPayload%0A%20%20%20%20CLI-%3E%3EFS%3A%20write%20myconfig.noorm.enc%0A%20%20%20%20CLI--%3E%3EUser%3A%20Success!%20Share%20file%20with%20recipient%0A"})]),fallback:a(()=>[...i[1]||(i[1]=[e(" Loading... ",-1)])]),_:1})),i[8]||(i[8]=h(`<h3 id="export-data-structure" tabindex="-1">Export Data Structure <a class="header-anchor" href="#export-data-structure" aria-label="Permalink to “Export Data Structure”">​</a></h3><p>The exported data includes everything needed to recreate the config except credentials:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;remote&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        isTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            dialect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;postgres&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;db.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5432</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myapp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            ssl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // NO user/password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./sql&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            changes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./changes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    secrets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;API_KEY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;encrypted-value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;WEBHOOK_SECRET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;another-value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="import-flow" tabindex="-1">Import Flow <a class="header-anchor" href="#import-flow" aria-label="Permalink to “Import Flow”">​</a></h2><p>When importing a config, the recipient:</p><ol><li>Selects or provides the <code>.noorm.enc</code> file</li><li>File is decrypted using recipient&#39;s private key</li><li>Preview shows config details (dialect, host, database, secrets count)</li><li>Recipient enters their database credentials</li><li>Config is saved with credentials, secrets are imported</li></ol>`,6)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-108",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20User%20as%20Recipient%0A%20%20%20%20participant%20CLI%20as%20noorm%20CLI%0A%20%20%20%20participant%20FS%20as%20File%20System%0A%20%20%20%20participant%20Crypto%20as%20Crypto%20Module%0A%20%20%20%20participant%20State%20as%20State%20Manager%0A%0A%20%20%20%20User-%3E%3ECLI%3A%20noorm%20config%3Aimport%20myconfig.noorm.enc%0A%20%20%20%20CLI-%3E%3EFS%3A%20read%20myconfig.noorm.enc%0A%20%20%20%20FS--%3E%3ECLI%3A%20SharedConfigPayload%20(encrypted)%0A%0A%20%20%20%20CLI-%3E%3EFS%3A%20load%20~%2F.noorm%2Fidentity.key%0A%20%20%20%20FS--%3E%3ECLI%3A%20privateKey%0A%0A%20%20%20%20CLI-%3E%3ECrypto%3A%20decryptWithPrivateKey(payload%2C%20privateKey)%0A%0A%20%20%20%20Note%20over%20Crypto%3A%201.%20Extract%20ephemeral%20public%20key%3Cbr%2F%3E2.%20ECDH%3A%20recipientPrivate%20%2B%20ephemeralPublic%3Cbr%2F%3E3.%20Derive%20same%20AES%20key%20via%20HKDF%3Cbr%2F%3E4.%20Decrypt%20with%20AES-256-GCM%0A%0A%20%20%20%20Crypto--%3E%3ECLI%3A%20ImportedData%20(config%20%2B%20secrets)%0A%0A%20%20%20%20CLI-%3E%3EUser%3A%20Preview%3A%20postgres%20%40%20db.example.com%3A5432%0A%20%20%20%20CLI-%3E%3EUser%3A%20Enter%20database%20credentials%0A%20%20%20%20User-%3E%3ECLI%3A%20username%2C%20password%0A%0A%20%20%20%20Note%20over%20CLI%3A%20Merge%20imported%20config%3Cbr%2F%3Ewith%20user%20credentials%0A%0A%20%20%20%20CLI-%3E%3EState%3A%20setConfig(name%2C%20fullConfig)%0A%20%20%20%20CLI-%3E%3EState%3A%20setSecret(configName%2C%20key%2C%20value)%20for%20each%0A%0A%20%20%20%20CLI--%3E%3EUser%3A%20Configuration%20imported%20successfully!%0A"})]),fallback:a(()=>[...i[2]||(i[2]=[e(" Loading... ",-1)])]),_:1})),i[9]||(i[9]=s("h2",{id:"encryption-details",tabindex:"-1"},[e("Encryption Details "),s("a",{class:"header-anchor",href:"#encryption-details","aria-label":"Permalink to “Encryption Details”"},"​")],-1)),i[10]||(i[10]=s("p",null,"noorm uses the ephemeral keypair pattern for perfect forward secrecy:",-1)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-115",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20Sender%5B%22Export%20(Sender%20Side)%22%5D%0A%20%20%20%20%20%20%20%20A%5BGenerate%20ephemeral%20X25519%20keypair%5D%20--%3E%20B%5BECDH%3A%20ephemeralPrivate%20%2B%20recipientPublic%5D%0A%20%20%20%20%20%20%20%20B%20--%3E%20C%5BHKDF%3A%20derive%2032-byte%20AES%20key%5D%0A%20%20%20%20%20%20%20%20C%20--%3E%20D%5BGenerate%20random%2016-byte%20IV%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%20E%5BAES-256-GCM%20encrypt%5D%0A%20%20%20%20%20%20%20%20E%20--%3E%20F%5BPackage%3A%20ephemeralPub%20%2B%20iv%20%2B%20authTag%20%2B%20ciphertext%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Recipient%5B%22Import%20(Recipient%20Side)%22%5D%0A%20%20%20%20%20%20%20%20G%5BExtract%20ephemeral%20public%20key%5D%20--%3E%20H%5BECDH%3A%20recipientPrivate%20%2B%20ephemeralPublic%5D%0A%20%20%20%20%20%20%20%20H%20--%3E%20I%5BHKDF%3A%20derive%20same%2032-byte%20AES%20key%5D%0A%20%20%20%20%20%20%20%20I%20--%3E%20J%5BAES-256-GCM%20decrypt%20with%20iv%20%2B%20authTag%5D%0A%20%20%20%20%20%20%20%20J%20--%3E%20K%5BParse%20decrypted%20JSON%5D%0A%20%20%20%20end%0A%0A%20%20%20%20F%20-.-%3E%7C%22Share%20.noorm.enc%20file%22%7C%20G%0A"})]),fallback:a(()=>[...i[3]||(i[3]=[e(" Loading... ",-1)])]),_:1})),i[11]||(i[11]=h(`<h3 id="sharedconfigpayload-structure" tabindex="-1">SharedConfigPayload Structure <a class="header-anchor" href="#sharedconfigpayload-structure" aria-label="Permalink to “SharedConfigPayload Structure”">​</a></h3><p>The encrypted file contains:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SharedConfigPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Protocol version</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    sender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Sender&#39;s email</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    recipient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Intended recipient&#39;s email</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    ephemeralPubKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// X25519 public key (hex)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    iv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Initialization vector (hex)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    authTag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// GCM authentication tag (hex)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    ciphertext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Encrypted data (hex)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to “Error Handling”">​</a></h2><p>Import can fail at several points. Each has a specific error message:</p><table tabindex="0"><thead><tr><th>Error</th><th>Message</th><th>Cause</th></tr></thead><tbody><tr><td>File not found</td><td><code>File not found: {path}</code></td><td>Path doesn&#39;t exist</td></tr><tr><td>Invalid format</td><td><code>Invalid file format. Not a valid noorm export file.</code></td><td>File isn&#39;t JSON or wrong structure</td></tr><tr><td>No identity</td><td><code>No private key found. Run &quot;noorm init&quot; first.</code></td><td>Missing <code>~/.noorm/identity.key</code></td></tr><tr><td>Wrong recipient</td><td><code>Could not decrypt file. You may not be the intended recipient.</code></td><td>Decryption failed - wrong key</td></tr><tr><td>Corrupted data</td><td><code>Decrypted content is invalid. File may be corrupted.</code></td><td>Decrypted JSON is malformed</td></tr></tbody></table><h2 id="security-notes" tabindex="-1">Security Notes <a class="header-anchor" href="#security-notes" aria-label="Permalink to “Security Notes”">​</a></h2><h3 id="why-ephemeral-keypairs" tabindex="-1">Why Ephemeral Keypairs? <a class="header-anchor" href="#why-ephemeral-keypairs" aria-label="Permalink to “Why Ephemeral Keypairs?”">​</a></h3><p>Each export generates a fresh keypair. Even if someone obtains the recipient&#39;s private key later, they cannot decrypt old exports without the ephemeral private key (which is never stored).</p><h3 id="why-exclude-credentials" tabindex="-1">Why Exclude Credentials? <a class="header-anchor" href="#why-exclude-credentials" aria-label="Permalink to “Why Exclude Credentials?”">​</a></h3><p>Database passwords are:</p><ul><li>Personal (each user has their own)</li><li>Rotatable (change without re-sharing configs)</li><li>Auditable (track who accessed what)</li></ul><p>Forcing recipients to enter credentials ensures accountability.</p><h3 id="file-safety" tabindex="-1">File Safety <a class="header-anchor" href="#file-safety" aria-label="Permalink to “File Safety”">​</a></h3><p>The <code>.noorm.enc</code> file can be shared via any channel (email, Slack, git) because:</p><ul><li>Only the intended recipient can decrypt it</li><li>Tampering is detected via GCM authentication tag</li><li>Sender identity is verified via metadata</li></ul><h2 id="key-storage" tabindex="-1">Key Storage <a class="header-anchor" href="#key-storage" aria-label="Permalink to “Key Storage”">​</a></h2><p>Identity keys are stored in the user&#39;s home directory:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>~/.noorm/</span></span>
<span class="line"><span>├── identity.key     # X25519 private key (0600 permissions)</span></span>
<span class="line"><span>├── identity.pub     # X25519 public key (0644 permissions)</span></span>
<span class="line"><span>└── identity.json    # Metadata (name, email, machine, os)</span></span></code></pre></div><p>Identity is stored globally at <code>~/.noorm/</code>, separate from the project&#39;s encrypted state file (<code>.noorm/state/state.enc</code>). This separation means:</p><ul><li>Identity works across all noorm projects on your machine</li><li>You can decrypt state files from any project with the same private key</li><li>The private key never needs to be stored in project state</li></ul><h2 id="usage-examples" tabindex="-1">Usage Examples <a class="header-anchor" href="#usage-examples" aria-label="Permalink to “Usage Examples”">​</a></h2><h3 id="export-a-config" tabindex="-1">Export a config <a class="header-anchor" href="#export-a-config" aria-label="Permalink to “Export a config”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Export &#39;production&#39; config for a teammate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config:export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enter their email when prompted</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># File created: production.noorm.enc</span></span></code></pre></div><h3 id="import-a-config" tabindex="-1">Import a config <a class="header-anchor" href="#import-a-config" aria-label="Permalink to “Import a config”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Import a shared config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config:import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production.noorm.enc</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enter your database credentials when prompted</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Config &#39;production&#39; imported with your credentials</span></span></code></pre></div><h3 id="known-users" tabindex="-1">Known Users <a class="header-anchor" href="#known-users" aria-label="Permalink to “Known Users”">​</a></h3><p>Before exporting, the recipient&#39;s public key must be known. Known users are discovered automatically when you activate a config:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># When Alice activates a shared database config, her identity syncs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Alice can now see Bob in her known users (if Bob has used this database)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> identity</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> known</span></span></code></pre></div><p>Identity sync happens automatically on <code>config use</code> - it registers your identity to the database and fetches other team members&#39; public keys.</p>`,30))])}const f=o(c,[["render",E]]);export{C as __pageData,f as default};
