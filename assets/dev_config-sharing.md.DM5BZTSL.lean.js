import{_ as o,I as d,c as k,o as t,a6 as h,b as r,j as s,w as a,a as e,J as l,a7 as p}from"./chunks/framework.YF6eQPX_.js";const C=JSON.parse('{"title":"Config Sharing","description":"","frontmatter":{},"headers":[],"relativePath":"dev/config-sharing.md","filePath":"dev/config-sharing.md"}'),c={name:"dev/config-sharing.md"};function E(g,i,y,m,u,A){const n=d("Mermaid");return t(),k("div",null,[i[4]||(i[4]=h("",8)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-38",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5BAlice's%20Config%5D%20--%3E%20B%5BExport%5D%0A%20%20%20%20B%20--%3E%20C%5BEncrypted%20File%5D%0A%20%20%20%20C%20--%3E%20D%5BShare%20via%20any%20channel%5D%0A%20%20%20%20D%20--%3E%20E%5BBob%20Downloads%5D%0A%20%20%20%20E%20--%3E%20F%5BImport%5D%0A%20%20%20%20F%20--%3E%20G%5BBob%20adds%20credentials%5D%0A%20%20%20%20G%20--%3E%20H%5BBob's%20Config%5D%0A"})]),fallback:a(()=>[...i[0]||(i[0]=[e(" Loading... ",-1)])]),_:1})),i[5]||(i[5]=s("h2",{id:"export-flow",tabindex:"-1"},[e("Export Flow "),s("a",{class:"header-anchor",href:"#export-flow","aria-label":"Permalink to “Export Flow”"},"​")],-1)),i[6]||(i[6]=s("p",null,"When exporting a config, the sender:",-1)),i[7]||(i[7]=s("ol",null,[s("li",null,"Enters recipient's email address"),s("li",null,"noorm looks up the recipient's public key from known users"),s("li",null,"Config data (excluding credentials) is encrypted with recipient's public key"),s("li",null,"Encrypted file is written to current directory")],-1)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-67",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20User%20as%20Sender%0A%20%20%20%20participant%20CLI%20as%20noorm%20CLI%0A%20%20%20%20participant%20State%20as%20State%20Manager%0A%20%20%20%20participant%20Crypto%20as%20Crypto%20Module%0A%20%20%20%20participant%20FS%20as%20File%20System%0A%0A%20%20%20%20User-%3E%3ECLI%3A%20noorm%20config%3Aexport%20myconfig%0A%20%20%20%20CLI-%3E%3EUser%3A%20Enter%20recipient%20email%0A%20%20%20%20User-%3E%3ECLI%3A%20bob%40example.com%0A%20%20%20%20CLI-%3E%3EState%3A%20findKnownUsersByEmail(email)%0A%20%20%20%20State--%3E%3ECLI%3A%20%5BKnownUser%20with%20publicKey%5D%0A%0A%20%20%20%20Note%20over%20CLI%3A%20Build%20export%20data%3Cbr%2F%3E(excludes%20user%2Fpassword)%0A%0A%20%20%20%20CLI-%3E%3ECrypto%3A%20encryptForRecipient(data%2C%20publicKey)%0A%0A%20%20%20%20Note%20over%20Crypto%3A%201.%20Generate%20ephemeral%20X25519%20keypair%3Cbr%2F%3E2.%20ECDH%3A%20ephemeralPrivate%20%2B%20recipientPublic%3Cbr%2F%3E3.%20Derive%20AES%20key%20via%20HKDF%3Cbr%2F%3E4.%20Encrypt%20with%20AES-256-GCM%0A%0A%20%20%20%20Crypto--%3E%3ECLI%3A%20SharedConfigPayload%0A%20%20%20%20CLI-%3E%3EFS%3A%20write%20myconfig.noorm.enc%0A%20%20%20%20CLI--%3E%3EUser%3A%20Success!%20Share%20file%20with%20recipient%0A"})]),fallback:a(()=>[...i[1]||(i[1]=[e(" Loading... ",-1)])]),_:1})),i[8]||(i[8]=h("",6)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-108",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20User%20as%20Recipient%0A%20%20%20%20participant%20CLI%20as%20noorm%20CLI%0A%20%20%20%20participant%20FS%20as%20File%20System%0A%20%20%20%20participant%20Crypto%20as%20Crypto%20Module%0A%20%20%20%20participant%20State%20as%20State%20Manager%0A%0A%20%20%20%20User-%3E%3ECLI%3A%20noorm%20config%3Aimport%20myconfig.noorm.enc%0A%20%20%20%20CLI-%3E%3EFS%3A%20read%20myconfig.noorm.enc%0A%20%20%20%20FS--%3E%3ECLI%3A%20SharedConfigPayload%20(encrypted)%0A%0A%20%20%20%20CLI-%3E%3EFS%3A%20load%20~%2F.noorm%2Fidentity.key%0A%20%20%20%20FS--%3E%3ECLI%3A%20privateKey%0A%0A%20%20%20%20CLI-%3E%3ECrypto%3A%20decryptWithPrivateKey(payload%2C%20privateKey)%0A%0A%20%20%20%20Note%20over%20Crypto%3A%201.%20Extract%20ephemeral%20public%20key%3Cbr%2F%3E2.%20ECDH%3A%20recipientPrivate%20%2B%20ephemeralPublic%3Cbr%2F%3E3.%20Derive%20same%20AES%20key%20via%20HKDF%3Cbr%2F%3E4.%20Decrypt%20with%20AES-256-GCM%0A%0A%20%20%20%20Crypto--%3E%3ECLI%3A%20ImportedData%20(config%20%2B%20secrets)%0A%0A%20%20%20%20CLI-%3E%3EUser%3A%20Preview%3A%20postgres%20%40%20db.example.com%3A5432%0A%20%20%20%20CLI-%3E%3EUser%3A%20Enter%20database%20credentials%0A%20%20%20%20User-%3E%3ECLI%3A%20username%2C%20password%0A%0A%20%20%20%20Note%20over%20CLI%3A%20Merge%20imported%20config%3Cbr%2F%3Ewith%20user%20credentials%0A%0A%20%20%20%20CLI-%3E%3EState%3A%20setConfig(name%2C%20fullConfig)%0A%20%20%20%20CLI-%3E%3EState%3A%20setSecret(configName%2C%20key%2C%20value)%20for%20each%0A%0A%20%20%20%20CLI--%3E%3EUser%3A%20Configuration%20imported%20successfully!%0A"})]),fallback:a(()=>[...i[2]||(i[2]=[e(" Loading... ",-1)])]),_:1})),i[9]||(i[9]=s("h2",{id:"encryption-details",tabindex:"-1"},[e("Encryption Details "),s("a",{class:"header-anchor",href:"#encryption-details","aria-label":"Permalink to “Encryption Details”"},"​")],-1)),i[10]||(i[10]=s("p",null,"noorm uses the ephemeral keypair pattern for perfect forward secrecy:",-1)),(t(),r(p,null,{default:a(()=>[l(n,{id:"mermaid-115",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20Sender%5B%22Export%20(Sender%20Side)%22%5D%0A%20%20%20%20%20%20%20%20A%5BGenerate%20ephemeral%20X25519%20keypair%5D%20--%3E%20B%5BECDH%3A%20ephemeralPrivate%20%2B%20recipientPublic%5D%0A%20%20%20%20%20%20%20%20B%20--%3E%20C%5BHKDF%3A%20derive%2032-byte%20AES%20key%5D%0A%20%20%20%20%20%20%20%20C%20--%3E%20D%5BGenerate%20random%2016-byte%20IV%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%20E%5BAES-256-GCM%20encrypt%5D%0A%20%20%20%20%20%20%20%20E%20--%3E%20F%5BPackage%3A%20ephemeralPub%20%2B%20iv%20%2B%20authTag%20%2B%20ciphertext%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Recipient%5B%22Import%20(Recipient%20Side)%22%5D%0A%20%20%20%20%20%20%20%20G%5BExtract%20ephemeral%20public%20key%5D%20--%3E%20H%5BECDH%3A%20recipientPrivate%20%2B%20ephemeralPublic%5D%0A%20%20%20%20%20%20%20%20H%20--%3E%20I%5BHKDF%3A%20derive%20same%2032-byte%20AES%20key%5D%0A%20%20%20%20%20%20%20%20I%20--%3E%20J%5BAES-256-GCM%20decrypt%20with%20iv%20%2B%20authTag%5D%0A%20%20%20%20%20%20%20%20J%20--%3E%20K%5BParse%20decrypted%20JSON%5D%0A%20%20%20%20end%0A%0A%20%20%20%20F%20-.-%3E%7C%22Share%20.noorm.enc%20file%22%7C%20G%0A"})]),fallback:a(()=>[...i[3]||(i[3]=[e(" Loading... ",-1)])]),_:1})),i[11]||(i[11]=h("",30))])}const f=o(c,[["render",E]]);export{C as __pageData,f as default};
