import{_ as i,c as a,o as e,a6 as n}from"./chunks/framework.YF6eQPX_.js";const k=JSON.parse('{"title":"Execution History","description":"","frontmatter":{},"headers":[],"relativePath":"guide/changes/history.md","filePath":"guide/changes/history.md"}'),t={name:"guide/changes/history.md"};function l(h,s,r,o,p,d){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="execution-history" tabindex="-1">Execution History <a class="header-anchor" href="#execution-history" aria-label="Permalink to “Execution History”">​</a></h1><p>Every database operation noorm performs is recorded. When a change runs, a build executes, or files get deployed, that execution goes into the history log with who ran it, when, how long it took, and whether it succeeded.</p><p>This gives you an audit trail for compliance, a debugging tool for failures, and a reference for understanding what happened to your database.</p><h2 id="what-gets-tracked" tabindex="-1">What Gets Tracked <a class="header-anchor" href="#what-gets-tracked" aria-label="Permalink to “What Gets Tracked”">​</a></h2><p>noorm records three types of operations:</p><table tabindex="0"><thead><tr><th>Type</th><th>Description</th><th>Trigger</th></tr></thead><tbody><tr><td><strong>change</strong></td><td>Change execution</td><td><code>change run</code>, <code>change ff</code>, <code>change next</code></td></tr><tr><td><strong>build</strong></td><td>Full schema rebuild</td><td><code>run build</code></td></tr><tr><td><strong>run</strong></td><td>Individual file execution</td><td><code>run file</code>, <code>run directory</code></td></tr></tbody></table><p>Each record captures:</p><ul><li><strong>Name</strong> - Which change, build, or file was executed</li><li><strong>Direction</strong> - Forward (<code>change</code>) or rollback (<code>revert</code>)</li><li><strong>Status</strong> - <code>success</code>, <code>failed</code>, or <code>skipped</code></li><li><strong>Who</strong> - The identity that ran it (name and email)</li><li><strong>When</strong> - Timestamp of execution</li><li><strong>Duration</strong> - How long it took in milliseconds</li><li><strong>Checksum</strong> - Hash of the executed files</li><li><strong>Error</strong> - If failed, what went wrong</li></ul><p>File-level details are also preserved. For a change with three SQL files, you can see exactly which file succeeded, which failed, and which were skipped.</p><h2 id="viewing-history-in-the-tui" tabindex="-1">Viewing History in the TUI <a class="header-anchor" href="#viewing-history-in-the-tui" aria-label="Permalink to “Viewing History in the TUI”">​</a></h2><p>Navigate to history from the changes menu. Press <code>g</code> from home, then <code>h</code> for history.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>+- Execution History --------------------------------------------+</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  Total: 47   Changes: 32   Builds: 10   Runs: 5                |</span></span>
<span class="line"><span>|  Success: 45   Failed: 2                                       |</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  &gt; [OK]  [CHANGESET] 2025-01-15-add-verification  2 hours ago  |</span></span>
<span class="line"><span>|    [OK]  [BUILD]     schema-build                 3 hours ago  |</span></span>
<span class="line"><span>|    [OK]  [CHANGESET] 2025-01-14-add-user-roles    yesterday    |</span></span>
<span class="line"><span>|    [ERR] [RUN]       seed-data.sql                yesterday    |</span></span>
<span class="line"><span>|    [OK]  [CHANGESET] 2025-01-10-init-schema       last week    |</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  +------------------------------------------------------------+|</span></span>
<span class="line"><span>|  | 2025-01-15-add-verification                                ||</span></span>
<span class="line"><span>|  | By: Alice &lt;alice@example.com&gt;                              ||</span></span>
<span class="line"><span>|  | Duration: 1.24s                                            ||</span></span>
<span class="line"><span>|  | Press Enter to view file details                           ||</span></span>
<span class="line"><span>|  +------------------------------------------------------------+|</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  [Enter] View Files   [Esc] Back                               |</span></span>
<span class="line"><span>+----------------------------------------------------------------+</span></span></code></pre></div><p>The summary bar shows totals by type. Color-coded status indicators make it easy to spot failures:</p><ul><li>Green <code>[OK]</code> - Success</li><li>Red <code>[ERR]</code> - Failed</li><li>Yellow <code>[-]</code> - Skipped</li></ul><p>Arrow keys move through the list. The detail panel at the bottom shows who ran the selected operation and how long it took.</p><h2 id="history-detail-view" tabindex="-1">History Detail View <a class="header-anchor" href="#history-detail-view" aria-label="Permalink to “History Detail View”">​</a></h2><p>Press Enter on any record to see file-level execution details:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>+- File Executions (2025-01-15-add-verification) ----------------+</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  Total: 3   Success: 2   Failed: 1                             |</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  &gt; [OK]  001_create-tokens-table.sql     (0.4s)                |</span></span>
<span class="line"><span>|    [OK]  002_add-user-column.sql         (0.3s)                |</span></span>
<span class="line"><span>|    [ERR] 003_add-index.sql               (0.5s)                |</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  +------------------------------------------------------------+|</span></span>
<span class="line"><span>|  | File Details                                               ||</span></span>
<span class="line"><span>|  | Path: changes/2025-01-15-.../change/001_create-tokens...   ||</span></span>
<span class="line"><span>|  | Checksum: 8f4a2b3c9d1e...                                  ||</span></span>
<span class="line"><span>|  +------------------------------------------------------------+|</span></span>
<span class="line"><span>|                                                                |</span></span>
<span class="line"><span>|  [Esc] Back                                                    |</span></span>
<span class="line"><span>+----------------------------------------------------------------+</span></span></code></pre></div><p>For failed files, the detail panel shows the error message:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>|  +------------------------------------------------------------+|</span></span>
<span class="line"><span>|  | File Details                                               ||</span></span>
<span class="line"><span>|  | Path: changes/2025-01-15-.../change/003_add-index.sql      ||</span></span>
<span class="line"><span>|  | Checksum: 3b7c8d2a4f5e...                                  ||</span></span>
<span class="line"><span>|  | Error: relation &quot;users&quot; does not exist                     ||</span></span>
<span class="line"><span>|  +------------------------------------------------------------+|</span></span></code></pre></div><p>This is invaluable for debugging. You can see exactly which file failed, what the error was, and what files succeeded before it.</p><h2 id="headless-mode" tabindex="-1">Headless Mode <a class="header-anchor" href="#headless-mode" aria-label="Permalink to “Headless Mode”">​</a></h2><p>For CI/CD pipelines and scripts, use the headless command:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> history</span></span></code></pre></div><p>Output:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Execution History: 20 records</span></span>
<span class="line"><span>  2025-01-15-add-verification - success (1/15/2025, 2:30:00 PM)</span></span>
<span class="line"><span>  schema-build - success (1/15/2025, 11:00:00 AM)</span></span>
<span class="line"><span>  2025-01-14-add-user-roles - success (1/14/2025, 4:15:00 PM)</span></span></code></pre></div><p>With JSON output for parsing:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> history</span></span></code></pre></div><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15-add-verification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;direction&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;change&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;executedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15T14:30:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;executedBy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice &lt;alice@example.com&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;durationMs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1240</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;schema-build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;direction&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;executedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-01-15T11:00:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;executedBy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CI Pipeline &lt;ci@company.com&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;durationMs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5830</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>Limit the number of records:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> history</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span></span></code></pre></div><h2 id="filtering-by-type" tabindex="-1">Filtering by Type <a class="header-anchor" href="#filtering-by-type" aria-label="Permalink to “Filtering by Type”">​</a></h2><p>The history screen shows all operation types by default. The summary bar helps you understand the distribution:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Total: 47   Changes: 32   Builds: 10   Runs: 5</span></span></code></pre></div><p>Type indicators make scanning easy:</p><table tabindex="0"><thead><tr><th>Indicator</th><th>Color</th><th>Meaning</th></tr></thead><tbody><tr><td><code>[CHANGESET]</code></td><td>Cyan</td><td>Change execution</td></tr><tr><td><code>[BUILD]</code></td><td>Blue</td><td>Full schema rebuild</td></tr><tr><td><code>[RUN]</code></td><td>Magenta</td><td>Individual file execution</td></tr></tbody></table><p>In the list, you can quickly spot operation types by color before reading the name.</p><h2 id="understanding-history-entries" tabindex="-1">Understanding History Entries <a class="header-anchor" href="#understanding-history-entries" aria-label="Permalink to “Understanding History Entries”">​</a></h2><p>Each history entry tells a complete story. Here&#39;s how to read them:</p><h3 id="who-ran-it" tabindex="-1">Who Ran It <a class="header-anchor" href="#who-ran-it" aria-label="Permalink to “Who Ran It”">​</a></h3><p>The identity shows who executed the operation:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>By: Alice &lt;alice@example.com&gt;</span></span></code></pre></div><p>In CI/CD, this might be:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>By: GitHub Actions &lt;actions@github.com&gt;</span></span></code></pre></div><p>Identity is captured from git config or explicitly set via <code>noorm identity</code>. This creates an audit trail for compliance requirements. You can also set a per-config identity override in <a href="/guide/environments/configs.html">Configs</a>.</p><h3 id="when-it-ran" tabindex="-1">When It Ran <a class="header-anchor" href="#when-it-ran" aria-label="Permalink to “When It Ran”">​</a></h3><p>Timestamps appear in relative format in the TUI:</p><ul><li><code>just now</code> - Within the last minute</li><li><code>2 hours ago</code> - Recent operations</li><li><code>yesterday</code> - Previous day</li><li><code>last week</code> - Within the past week</li><li><code>Jan 15</code> - Specific date for older records</li></ul><p>The JSON output provides ISO timestamps for precise filtering and analysis.</p><h3 id="how-long-it-took" tabindex="-1">How Long It Took <a class="header-anchor" href="#how-long-it-took" aria-label="Permalink to “How Long It Took”">​</a></h3><p>Duration is shown in seconds:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Duration: 1.24s</span></span></code></pre></div><p>For file-level details, you can see individual file timings:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>[OK]  001_create-tokens-table.sql     (0.4s)</span></span>
<span class="line"><span>[OK]  002_add-user-column.sql         (0.3s)</span></span></code></pre></div><p>This helps identify slow changes or unexpected performance issues.</p><h3 id="what-files-executed" tabindex="-1">What Files Executed <a class="header-anchor" href="#what-files-executed" aria-label="Permalink to “What Files Executed”">​</a></h3><p>The detail view breaks down each file:</p><table tabindex="0"><thead><tr><th>Status</th><th>Icon</th><th>Meaning</th></tr></thead><tbody><tr><td>Success</td><td><code>[OK]</code></td><td>File executed without errors</td></tr><tr><td>Failed</td><td><code>[ERR]</code></td><td>Execution threw an error</td></tr><tr><td>Skipped</td><td><code>[-]</code></td><td>File was skipped (unchanged or conditional)</td></tr></tbody></table><p>For skipped files, the skip reason explains why:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>[-]  setup.sql     - unchanged since last run</span></span></code></pre></div><h2 id="using-history-for-debugging" tabindex="-1">Using History for Debugging <a class="header-anchor" href="#using-history-for-debugging" aria-label="Permalink to “Using History for Debugging”">​</a></h2><p>When something goes wrong, history is your first stop.</p><h3 id="finding-the-failure" tabindex="-1">Finding the Failure <a class="header-anchor" href="#finding-the-failure" aria-label="Permalink to “Finding the Failure”">​</a></h3><p>Look for red <code>[ERR]</code> indicators in the list. The most recent failure appears near the top.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>  [ERR] [CHANGESET] 2025-01-16-add-payments  10 minutes ago</span></span></code></pre></div><h3 id="drilling-into-details" tabindex="-1">Drilling into Details <a class="header-anchor" href="#drilling-into-details" aria-label="Permalink to “Drilling into Details”">​</a></h3><p>Press Enter to see which file failed:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>  [OK]  001_create-table.sql      (0.3s)</span></span>
<span class="line"><span>  [ERR] 002_add-constraint.sql    (0.1s)</span></span>
<span class="line"><span>  [-]   003_add-index.sql         - not executed</span></span></code></pre></div><p>The third file was never executed because the second one failed. This tells you exactly where to start looking.</p><h3 id="reading-the-error" tabindex="-1">Reading the Error <a class="header-anchor" href="#reading-the-error" aria-label="Permalink to “Reading the Error”">​</a></h3><p>The error message often points directly to the problem:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Error: duplicate key value violates unique constraint &quot;users_email_key&quot;</span></span></code></pre></div><p>Now you know the issue---there&#39;s duplicate data that needs cleaning before the constraint can be added.</p><h3 id="checking-previous-runs" tabindex="-1">Checking Previous Runs <a class="header-anchor" href="#checking-previous-runs" aria-label="Permalink to “Checking Previous Runs”">​</a></h3><p>Compare with successful runs of the same change on other environments. Did something change between runs? Did the data differ?</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">noorm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> history</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.[] | select(.name == &quot;2025-01-16-add-payments&quot;)&#39;</span></span></code></pre></div><h3 id="recovery-workflow" tabindex="-1">Recovery Workflow <a class="header-anchor" href="#recovery-workflow" aria-label="Permalink to “Recovery Workflow”">​</a></h3><p>After fixing the issue:</p><ol><li>Fix the underlying problem (clean data, modify SQL, etc.)</li><li>Re-run the change with <code>--force</code> if needed</li><li>Check history to confirm success</li><li>Continue with <code>change ff</code> for remaining changes</li></ol><h2 id="history-retention" tabindex="-1">History Retention <a class="header-anchor" href="#history-retention" aria-label="Permalink to “History Retention”">​</a></h2><p>History is stored in the noorm tracking tables (<code>__noorm_change__</code> and <code>__noorm_executions__</code>). These tables grow with usage.</p><p>For long-running projects, consider:</p><ul><li>Periodic exports for archival</li><li>Database maintenance to manage table size</li><li>Separate tracking databases for high-volume environments</li></ul><p>The history is per-database, per-config. Each configuration maintains its own execution history.</p><h2 id="what-s-next" tabindex="-1">What&#39;s Next? <a class="header-anchor" href="#what-s-next" aria-label="Permalink to “What&#39;s Next?”">​</a></h2><ul><li><a href="/guide/changes/forward-revert.html">Forward &amp; Revert</a> - Applying and rolling back changes</li><li><a href="/guide/changes/overview.html">Changes</a> - Change directory structure and file types</li><li><a href="/guide/database/teardown.html">Teardown</a> - What happens to history after teardown</li></ul>`,86)])])}const g=i(t,[["render",l]]);export{k as __pageData,g as default};
